<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ttf2stitch — Font Inspector</title>
<link rel="stylesheet" href="inspector/inspector.css">
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header" id="sidebarHeader">
    <h1><span class="accent">&#10006;</span> ttf2stitch Inspector</h1>
    <p id="sidebarStatus">Drop TTF/OTF or JSON files</p>
  </div>
  <div class="filter-bar">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="serif">Serif</button>
    <button class="filter-btn" data-filter="sans-serif">Sans</button>
    <button class="filter-btn" data-filter="script">Script</button>
    <button class="filter-btn" data-filter="pixel">Pixel</button>
    <button class="filter-btn" data-filter="decorative">Deco</button>
  </div>
  <div class="search-bar">
    <input type="text" class="search-input" id="fontSearch" placeholder="Search fonts..." />
  </div>
  <div class="font-list" id="fontList">
    <div class="font-list__empty">No fonts loaded yet</div>
  </div>
</div>

<div class="main">
  <div class="toolbar">
    <div>
      <label>Preview text</label><br>
      <input type="text" id="previewText" value="ABCDabcd 0123 !@#" />
    </div>
    <div>
      <label>Scale: <span id="scaleLabel">6</span>x</label><br>
      <input type="range" id="scaleSlider" min="2" max="14" value="6" />
    </div>
    <div>
      <label>Color</label><br>
      <input type="color" id="colorPicker" value="#5a4a3a" />
    </div>
    <label class="action-btn pink action-btn--file">
      Load files
      <input type="file" id="fileInput" multiple accept=".json,.ttf,.otf,.woff,.woff2" hidden />
    </label>
  </div>

  <div class="content" id="mainContent">
    <div id="overviewView">
      <div class="drop-zone" id="dropZone">
        <span class="icon">&#128462;</span>
        <h3>Drop font files here</h3>
        <p>TTF, OTF, WOFF — converts automatically to bitmap</p>
        <p>JSON — loads directly as bitmap font</p>
        <div class="formats">.ttf .otf .woff .woff2 .json</div>
      </div>
      <div class="overview-grid" id="overviewGrid"></div>
    </div>
    <div id="detailView" class="detail-view"></div>
    <div id="editorView" class="editor-view"></div>
  </div>

  <div class="export-bar" id="exportBar" hidden>
    <span id="fontCount">0 fonts</span>
    <button id="exportAllBtn">Export all JSON</button>
    <button id="copyIdsBtn">Copy IDs</button>
  </div>
</div>

<!-- Convert TTF modal -->
<div class="modal-backdrop" id="convertModal">
  <div class="modal modal--wide">
    <h3 id="modalTitle" class="modal__title--large">Choose a style</h3>
    <div class="subtitle modal__subtitle--spaced" id="modalSubtitle">filename.ttf</div>

    <!-- Presets: big friendly buttons -->
    <div id="presetGrid" class="preset-grid">
      <button class="preset-btn selected" data-preset="elegant">
        <div class="preset-btn__icon">&#9998;</div>
        <div class="preset-btn__label">Elegant</div>
        <div class="preset-btn__desc">Script &amp; decorative fonts<br>Thick, connected strokes</div>
      </button>
      <button class="preset-btn" data-preset="clean">
        <div class="preset-btn__icon">&#65;;</div>
        <div class="preset-btn__label">Clean</div>
        <div class="preset-btn__desc">Simple, readable fonts<br>Sharp &amp; precise</div>
      </button>
      <button class="preset-btn" data-preset="bold">
        <div class="preset-btn__icon preset-btn__icon--bold">B</div>
        <div class="preset-btn__label">Bold</div>
        <div class="preset-btn__desc">Extra thick letters<br>Easy to see &amp; stitch</div>
      </button>
    </div>

    <!-- Fabric + Physical size -->
    <div class="modal-section">
      <label class="modal-section__label">Fabric type</label>
      <div id="aidaButtons" class="aida-buttons">
        <button class="aida-btn" data-count="11">Aida 11</button>
        <button class="aida-btn selected" data-count="14">Aida 14</button>
        <button class="aida-btn" data-count="16">Aida 16</button>
        <button class="aida-btn" data-count="18">Aida 18</button>
      </div>
    </div>

    <div class="modal-section">
      <label class="modal-section__label">Letter height</label>
      <div class="height-row">
        <input type="number" id="modalPhysicalSize" class="height-input" value="2" min="0.5" max="10" step="0.5" />
        <div class="unit-toggle">
          <button id="unitCm" class="unit-btn selected">cm</button>
          <button id="unitIn" class="unit-btn">inch</button>
        </div>
        <div class="stitch-result">
          = <strong id="stitchResult">11</strong> stitches
        </div>
      </div>
      <div class="size-hint" id="sizeHint">
        On Aida 14: 2 cm ≈ 1.8 cm real (11 stitches × 1.81 mm each)
      </div>
    </div>

    <!-- Hidden field for the computed height -->
    <input type="hidden" id="modalHeight" value="11" />

    <!-- Advanced (collapsed) -->
    <details class="advanced-details">
      <summary class="advanced-summary">Advanced options ▾</summary>
      <div class="advanced-body">
        <div>
          <label class="advanced-label">Stroke thickness</label>
          <input type="number" id="modalBold" class="advanced-input" value="1" min="0" max="3" />
        </div>
        <div>
          <label class="advanced-label">Threshold</label>
          <div class="threshold-row">
            <input type="number" id="modalThreshold" class="advanced-input advanced-input--short" value="128" min="1" max="254" />
            <label class="auto-checkbox">
              <input type="checkbox" id="modalAutoThreshold" checked />
              <span>Auto</span>
            </label>
          </div>
        </div>
        <div>
          <label class="advanced-label">Strategy</label>
          <select id="modalStrategy" class="advanced-input">
            <option value="max-ink">Max-ink (decorative)</option>
            <option value="average">Average (clean)</option>
          </select>
        </div>
        <div>
          <label class="advanced-label">Letter spacing</label>
          <input type="number" id="modalSpacing" class="advanced-input" value="1" min="0" max="10" />
        </div>
        <div>
          <label class="advanced-label">Category</label>
          <select id="modalCategory" class="advanced-input">
            <option value="sans-serif">Sans-Serif</option>
            <option value="serif">Serif</option>
            <option value="script" selected>Script</option>
            <option value="pixel">Pixel</option>
            <option value="decorative">Decorative</option>
            <option value="gothic">Gothic</option>
          </select>
        </div>
      </div>
    </details>

    <div class="progress" id="modalProgress"></div>
    <div class="btn-row modal__btn-row--tight">
      <button class="btn-cancel" id="modalCancelBtn">Cancel</button>
      <button class="btn-convert modal__convert-btn--large" id="modalConvertBtn">Convert &#10024;</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script type="module" src="inspector/inspector-main.js"></script>
</body>
</html>
