<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Word2Stitch â€” Cross-Stitch Pattern Generator</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Anybody:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="ui-shell.css">
</head>
<body>

<!-- -- Auth Gate (Clerk sign-in overlay) -- -->
<div id="auth-gate">
  <div class="auth-gate-logo">
    <span class="logo-x">&#10006;</span>
    <span class="logo-text">Word<em>2</em>Stitch</span>
  </div>
  <div id="auth-sign-in"></div>
</div>

<!-- -- Top Bar -- -->
<header class="topbar">
  <div class="logo">
    <span class="logo-x">&#10006;</span>
    <span class="logo-text">Word<em>2</em>Stitch</span>
  </div>

  <div class="topbar-sep"></div>

  <div class="text-input-area">
    <textarea
      class="text-input"
      id="textInput"
      aria-label="Text to render"
      placeholder="Type your text hereâ€¦"
      data-i18n-placeholder="placeholder_text"
      maxlength="200"
      autocomplete="off"
      spellcheck="false"
      rows="1"
    >Welcome</textarea>
  </div>

  <select class="lang-select" id="langSelect" aria-label="Language">
    <option value="en">ðŸ‡¬ðŸ‡§ EN</option>
    <option value="es">ðŸ‡ªðŸ‡¸ ES</option>
    <option value="fr">ðŸ‡«ðŸ‡· FR</option>
    <option value="de">ðŸ‡©ðŸ‡ª DE</option>
    <option value="it">ðŸ‡®ðŸ‡¹ IT</option>
    <option value="pt">ðŸ‡§ðŸ‡· PT</option>
    <option value="nl">ðŸ‡³ðŸ‡± NL</option>
    <option value="ja">ðŸ‡¯ðŸ‡µ JA</option>
    <option value="ko">ðŸ‡°ðŸ‡· KO</option>
    <option value="zh">ðŸ‡¨ðŸ‡³ ZH</option>
    <option value="ru">ðŸ‡·ðŸ‡º RU</option>
    <option value="pl">ðŸ‡µðŸ‡± PL</option>
    <option value="sv">ðŸ‡¸ðŸ‡ª SV</option>
    <option value="da">ðŸ‡©ðŸ‡° DA</option>
    <option value="fi">ðŸ‡«ðŸ‡® FI</option>
    <option value="uk">ðŸ‡ºðŸ‡¦ UK</option>
    <option value="hu">ðŸ‡­ðŸ‡º HU</option>
  </select>

  <div class="unit-toggle" id="unitToggle">
    <button class="unit-toggle-btn active" data-unit="metric" aria-pressed="true" aria-label="Centimeters">cm</button>
    <button class="unit-toggle-btn" data-unit="imperial" aria-pressed="false" aria-label="Inches">in</button>
  </div>

  <button class="btn-download" id="btnDownload" aria-label="Download PDF">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
      <polyline points="7 10 12 15 17 10"/>
      <line x1="12" y1="15" x2="12" y2="3"/>
    </svg>
    <span class="dl-label">PDF</span>
  </button>

  <button class="btn-upgrade" id="btn-upgrade" aria-label="Upgrade to Pro">Upgrade to Pro</button>
  <span class="pro-badge" id="pro-badge" style="display:none">PRO</span>
  <div id="clerk-user-button"></div>
</header>

<!-- -- Main Split Layout -- -->
<main class="main-layout">

  <!-- -- Left Sidebar: Controls -- -->
  <aside class="sidebar">

    <!-- Font Search + Header -->
    <div class="sidebar-section">
      <div class="section-header">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
        <span data-i18n="section_font">Font</span>
      </div>
      <input
        type="text"
        class="font-search"
        id="fontSearch"
        aria-label="Search fonts"
        placeholder="Search fontsâ€¦"
        data-i18n-placeholder="search_fonts"
        autocomplete="off"
        spellcheck="false"
      />
      <div class="font-tabs" id="fontCategoryTabs">
        <button class="font-tab active" data-category="all">All</button>
      </div>
    </div>

    <!-- Font List (scrollable) -->
    <div class="font-list" id="fontList"></div>

    <!-- Height Control -->
    <div class="sidebar-section">
      <div class="section-header">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h4M18 12h4M7 7l2 2M15 15l2 2M7 17l2-2M15 7l2-2"/></svg>
        <span data-i18n="section_height">Stitch Height</span>
      </div>
      <div class="height-control">
        <input type="range" class="height-slider" id="heightSlider" min="8" max="30" value="18" step="1" aria-label="Stitch height" />
        <div>
          <span class="height-value" id="heightValue">18</span>
          <span class="height-unit" data-i18n="unit_px">st</span>
        </div>
      </div>
    </div>

    <!-- Text Alignment -->
    <div class="sidebar-section">
      <div class="section-header">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        <span data-i18n="section_align">Alignment</span>
      </div>
      <div class="align-row" id="alignRow">
        <button class="align-btn" data-align="left" aria-label="Align left">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="18" y2="18"/></svg>
          <span data-i18n="align_left">Left</span>
        </button>
        <button class="align-btn active" data-align="center" aria-label="Align center">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="6" y1="12" x2="18" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
          <span data-i18n="align_center">Center</span>
        </button>
        <button class="align-btn" data-align="right" aria-label="Align right">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="9" y1="12" x2="21" y2="12"/><line x1="6" y1="18" x2="21" y2="18"/></svg>
          <span data-i18n="align_right">Right</span>
        </button>
      </div>
    </div>

    <!-- Color Picker -->
    <div class="sidebar-section sidebar-color-section">
      <div class="section-header">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
        <span data-i18n="section_color">Thread Color</span>
      </div>
      <div class="color-row" id="colorRow"></div>
      <!-- Desktop color popover (all 449 DMC colors with search) -->
      <div class="color-popover" id="colorPopover">
        <div class="color-popover-header">
          <input type="text" class="color-popover-search" id="colorPopoverSearch" placeholder="Search DMC colorsâ€¦" autocomplete="off" spellcheck="false" />
          <button class="color-popover-close" id="colorPopoverClose" aria-label="Close">&times;</button>
        </div>
        <div class="color-popover-grid" id="colorPopoverGrid"></div>
      </div>
    </div>

    <!-- Aida Count -->
    <div class="sidebar-section">
      <div class="section-header">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/></svg>
        <span data-i18n="section_fabric">Fabric</span>
      </div>
      <div class="aida-row" id="aidaRow">
        <button class="aida-chip" data-count="11">
          <span class="aida-chip-num">11</span>
          <span class="aida-chip-label" data-i18n="label_aida">Aida</span>
        </button>
        <button class="aida-chip selected" data-count="14">
          <span class="aida-chip-num">14</span>
          <span class="aida-chip-label" data-i18n="label_aida">Aida</span>
        </button>
        <button class="aida-chip" data-count="16">
          <span class="aida-chip-num">16</span>
          <span class="aida-chip-label" data-i18n="label_aida">Aida</span>
        </button>
        <button class="aida-chip" data-count="18">
          <span class="aida-chip-num">18</span>
          <span class="aida-chip-label" data-i18n="label_aida">Aida</span>
        </button>
        <button class="aida-chip" data-count="custom" id="aidaCustomChip">
          <span class="aida-chip-num">âœŽ</span>
          <span class="aida-chip-label" data-i18n="label_custom">Custom</span>
        </button>
      </div>
      <div class="custom-stitch-row" id="customStitchRow">
        <div class="custom-stitch-header">
          <span class="stitch-label" data-i18n="label_stitch_length">Stitch length</span>
          <div class="stitch-value-display">
            <span class="stitch-value-num" id="customStitchValue">3.0</span>
            <span class="stitch-value-unit" id="customStitchUnit">mm</span>
          </div>
        </div>
        <input type="range" class="custom-stitch-slider" id="customStitchSlider" min="1" max="10" value="3" step="0.1" aria-label="Custom stitch length" />
        <div class="custom-stitch-equiv" id="customStitchEquiv"></div>
      </div>
    </div>

  </aside>

  <!-- -- Right: Preview -- -->
  <div class="preview-area" id="previewArea">

    <!-- Loading overlay -->
    <div class="preview-loading hidden" id="previewLoading">
      <div class="loading-spinner"></div>
      <div class="loading-text" data-i18n="loading_text">Rasterizingâ€¦</div>
    </div>

    <div class="preview-empty" id="previewEmpty">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="3" y="3" width="18" height="18" rx="2"/>
        <line x1="3" y1="9" x2="21" y2="9"/>
        <line x1="3" y1="15" x2="21" y2="15"/>
        <line x1="9" y1="3" x2="9" y2="21"/>
        <line x1="15" y1="3" x2="15" y2="21"/>
      </svg>
      <span data-i18n="empty_state">Type something to see your pattern</span>
    </div>

    <div class="preview-canvas-wrap" id="previewWrap" style="display:none;">
      <!-- Canvas + vertical ruler wrapper -->
      <div class="canvas-rulers-wrap">
        <!-- Vertical ruler (left of canvas, mobile only) -->
        <div class="ruler-vertical" id="rulerVertical">
          <div class="ruler-v-edge"></div>
          <div class="ruler-v-bar">
            <div class="ruler-v-label" id="rulerHeight">--</div>
          </div>
          <div class="ruler-v-edge"></div>
        </div>
        <canvas id="mainCanvas"></canvas>
      </div>

      <!-- Ruler showing width in cm -->
      <div class="ruler-info" id="rulerInfo">
        <div class="ruler-line">
          <div class="ruler-edge"></div>
          <div class="ruler-bar">
            <div class="ruler-label" id="rulerWidth">--</div>
          </div>
          <div class="ruler-edge"></div>
        </div>
      </div>

      <!-- Stats pills -->
      <div class="stats-bar" id="statsBar">
        <div class="stat-pill size-pill">
          <strong id="statSizeCm">--</strong>
          <span class="unit" id="statSizeUnit">cm</span>
        </div>
        <div class="stat-sep">.</div>
        <div class="stat-pill">
          <strong id="statStitchesW">--</strong>x<strong id="statStitchesH">--</strong>
          <span class="unit" data-i18n="unit_stitches">stitches</span>
        </div>
        <div class="stat-sep">.</div>
        <div class="stat-pill">
          <strong id="statTotal">--</strong>
          <span class="unit" data-i18n="unit_crosses">crosses</span>
        </div>
        <div class="stat-sep">.</div>
        <div class="stat-pill">
          DMC <strong id="statDmc">--</strong>
          <span class="unit" id="statThread">--</span>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- -- Mobile Input Bar -- -->
<div class="mobile-input-bar" id="mobileInputBar">
  <textarea
    class="mobile-text-input"
    id="mobileTextInput"
    aria-label="Text to render"
    placeholder="Type your text hereâ€¦"
    data-i18n-placeholder="placeholder_text"
    maxlength="200"
    autocomplete="off"
    spellcheck="false"
    rows="2"
  >Welcome</textarea>
</div>

<!-- -- Mobile Toolbar (Slider + 3 Buttons) -- -->
<div class="mobile-toolbar" id="mobileToolbar">
  <!-- Row 1: Height slider -->
  <div class="mobile-slider-row">
    <span class="mobile-slider-label">H</span>
    <input type="range" class="height-slider" id="mobileHeightSlider" min="8" max="30" value="18" step="1" />
    <span class="mobile-slider-value" id="mobileHeightValue">18</span>
    <span class="mobile-slider-unit">st</span>
  </div>
  <!-- Row 2: Text alignment -->
  <div class="mobile-align-row" id="mobileAlignRow">
    <button class="align-btn" data-align="left" aria-label="Align left">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="18" y2="18"/></svg>
    </button>
    <button class="align-btn active" data-align="center" aria-label="Align center">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="6" y1="12" x2="18" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
    </button>
    <button class="align-btn" data-align="right" aria-label="Align right">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="9" y1="12" x2="21" y2="12"/><line x1="6" y1="18" x2="21" y2="18"/></svg>
    </button>
  </div>
  <!-- Row 3: Aida + Font + Color buttons -->
  <div class="mobile-buttons-row">
    <button class="mobile-tb-btn" id="mobileAidaBtn" aria-label="Fabric settings">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/></svg>
      <span class="tb-label" id="mobileAidaValue">14 ct</span>
      <svg class="tb-chevron" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
    </button>
    <button class="mobile-tb-btn" id="mobileFontBtn" aria-label="Select font">
      <svg viewBox="0 0 24 24"><path d="M4 7V4h16v3"/><path d="M9 20h6"/><path d="M12 4v16"/></svg>
      <span class="tb-label" id="mobileFontName">Font</span>
      <svg class="tb-chevron" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
    </button>
    <button class="mobile-tb-btn" id="mobileColorBtn" aria-label="Thread color">
      <div class="mobile-color-swatch" id="mobileColorSwatch"></div>
      <span class="tb-label" id="mobileColorName">Black</span>
      <svg class="tb-chevron" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
    </button>
  </div>
</div>

<!-- -- Sheet Backdrop -- -->
<div class="sheet-backdrop" id="sheetBackdrop"></div>

<!-- -- Font Bottom Sheet -- -->
<div class="bottom-sheet sheet-font" id="sheetFont" role="dialog" aria-modal="true" aria-label="Font selector">
  <div class="sheet-handle" id="sheetFontHandle"></div>
  <div class="sheet-title" data-i18n="section_font">Font</div>
  <div class="sheet-body">
    <div class="sheet-font-search">
      <input type="text" id="sheetFontSearch" aria-label="Search fonts" placeholder="Search fontsâ€¦" data-i18n-placeholder="search_fonts" autocomplete="off" spellcheck="false" />
    </div>
    <div class="sheet-font-tabs" id="sheetFontTabs"></div>
    <div class="sheet-font-list-wrap" id="sheetFontListWrap" role="listbox" aria-label="Font list">
      <div class="sheet-font-list-viewport" id="sheetFontListViewport"></div>
    </div>
  </div>
</div>

<!-- -- Color Bottom Sheet -- -->
<div class="bottom-sheet sheet-color" id="sheetColor" role="dialog" aria-modal="true" aria-label="Color selector">
  <div class="sheet-handle" id="sheetColorHandle"></div>
  <div class="sheet-title" data-i18n="section_color">Thread Color</div>
  <div class="sheet-body">
    <div class="sheet-color-current" id="sheetColorCurrent">
      <div class="sheet-color-swatch" id="sheetColorSwatch"></div>
      <div>
        <div class="sheet-color-name" id="sheetColorName">--</div>
        <div class="sheet-color-code" id="sheetColorCode">DMC --</div>
      </div>
    </div>
    <div class="sheet-color-search">
      <input type="text" id="sheetColorSearch" placeholder="Search DMC colorsâ€¦" autocomplete="off" spellcheck="false" />
    </div>
    <div class="sheet-color-grid" id="sheetColorGrid"></div>
  </div>
</div>

<!-- -- Settings Bottom Sheet -- -->
<div class="bottom-sheet sheet-settings" id="sheetSettings" role="dialog" aria-modal="true" aria-label="Fabric & Stitch">
  <div class="sheet-handle" id="sheetSettingsHandle"></div>
  <div class="sheet-title" data-i18n="sheet_fabric">Fabric &amp; Stitch</div>
  <div class="sheet-body">
    <div class="sheet-settings-group">
      <div class="sheet-settings-label">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h4M18 12h4M7 7l2 2M15 15l2 2M7 17l2-2M15 7l2-2"/></svg>
        <span data-i18n="section_height">Stitch Height</span>
      </div>
      <div class="height-control">
        <input type="range" class="height-slider" id="sheetHeightSlider" min="8" max="30" value="18" step="1" aria-label="Stitch height" />
        <div>
          <span class="height-value" id="sheetHeightValue">18</span>
          <span class="height-unit" data-i18n="unit_px">st</span>
        </div>
      </div>
    </div>
    <div class="sheet-settings-group">
      <div class="sheet-settings-label">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/></svg>
        <span data-i18n="section_fabric">Fabric</span>
      </div>
      <div class="aida-row" id="sheetAidaRow">
        <button class="aida-chip" data-count="11"><span class="aida-chip-num">11</span><span class="aida-chip-label" data-i18n="label_aida">Aida</span></button>
        <button class="aida-chip selected" data-count="14"><span class="aida-chip-num">14</span><span class="aida-chip-label" data-i18n="label_aida">Aida</span></button>
        <button class="aida-chip" data-count="16"><span class="aida-chip-num">16</span><span class="aida-chip-label" data-i18n="label_aida">Aida</span></button>
        <button class="aida-chip" data-count="18"><span class="aida-chip-num">18</span><span class="aida-chip-label" data-i18n="label_aida">Aida</span></button>
        <button class="aida-chip" data-count="custom"><span class="aida-chip-num">&#9998;</span><span class="aida-chip-label" data-i18n="label_custom">Custom</span></button>
      </div>
      <div class="custom-stitch-row" id="sheetCustomStitchRow">
        <div class="custom-stitch-header">
          <span class="stitch-label" data-i18n="label_stitch_length">Stitch length</span>
          <div class="stitch-value-display">
            <span class="stitch-value-num" id="sheetCustomStitchValue">3.0</span>
            <span class="stitch-value-unit" id="sheetCustomStitchUnit">mm</span>
          </div>
        </div>
        <input type="range" class="custom-stitch-slider" id="sheetCustomStitchSlider" min="1" max="10" value="3" step="0.1" aria-label="Custom stitch length" />
        <div class="custom-stitch-equiv" id="sheetCustomStitchEquiv"></div>
      </div>
    </div>
  </div>
</div>

<!-- -- Info Bottom Sheet -- -->
<div class="bottom-sheet sheet-info" id="sheetInfo" role="dialog" aria-modal="true" aria-label="Pattern info">
  <div class="sheet-handle" id="sheetInfoHandle"></div>
  <div class="sheet-title" data-i18n="sheet_info">Pattern Info</div>
  <div class="sheet-body">
    <div class="sheet-info-cards">
      <div class="sheet-info-card full-width">
        <div class="sheet-info-card-value" id="infoSize">-- x --</div>
        <div class="sheet-info-card-label" id="infoSizeUnit">cm</div>
      </div>
      <div class="sheet-info-card">
        <div class="sheet-info-card-value" id="infoStitches">--x--</div>
        <div class="sheet-info-card-label" data-i18n="unit_stitches">stitches</div>
      </div>
      <div class="sheet-info-card">
        <div class="sheet-info-card-value" id="infoCrosses">--</div>
        <div class="sheet-info-card-label" data-i18n="unit_crosses">crosses</div>
      </div>
      <div class="sheet-info-card">
        <div class="sheet-info-card-value" id="infoDmc">--</div>
        <div class="sheet-info-card-label" data-i18n="label_dmc">DMC</div>
      </div>
      <div class="sheet-info-card">
        <div class="sheet-info-card-value" id="infoThread">--</div>
        <div class="sheet-info-card-label" data-i18n="label_thread">Thread</div>
      </div>
    </div>
    <div class="sheet-info-ruler" id="infoRuler">
      <div class="ruler-line">
        <div class="ruler-edge"></div>
        <div class="ruler-bar"><div class="ruler-label" id="infoRulerWidth">--</div></div>
        <div class="ruler-edge"></div>
      </div>
    </div>
    <div class="sheet-info-lang">
      <label data-i18n="label_language">Language</label>
      <select id="sheetLangSelect">
        <option value="en">EN English</option>
        <option value="es">ES EspaÃ±ol</option>
        <option value="fr">FR FranÃ§ais</option>
        <option value="de">DE Deutsch</option>
        <option value="it">IT Italiano</option>
        <option value="pt">PT PortuguÃªs</option>
        <option value="nl">NL Nederlands</option>
        <option value="ja">JA Japanese</option>
        <option value="ko">KO Korean</option>
        <option value="zh">ZH Chinese</option>
        <option value="ru">RU Russian</option>
        <option value="pl">PL Polish</option>
        <option value="sv">SV Swedish</option>
        <option value="da">DA Danish</option>
        <option value="fi">FI Finnish</option>
        <option value="uk">UK Ukrainian</option>
        <option value="hu">HU Hungarian</option>
      </select>
    </div>
  </div>
</div>

<!-- JS loaded via assemble.js from ui-modules/ -->

</body>
</html>
